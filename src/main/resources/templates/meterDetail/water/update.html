<#bs4Body>

<div class="container-fluid">
    <input type="hidden" id="_sourceChannel" value="<#config name='ia.source.channel.meterDetail'/>">
    <form id="saveForm" role="form" novalidate>
        <input type="hidden" name="id" value="${meterDetail.id!}">
        <input type="hidden" name="version" value="${meterDetail.version!}">
        <input type="hidden" id="meterType" value="1">
        <div class="row row-cols-4" >
            <div class="form-group col">
                <label for="usageTime">截止月份<i class="red">*</i></label>
                <input type="text" class="form-control laymonth" id="usageTime" name="usageTime" value="${meterDetail.usageTime!,localDateTimeFormat='yyyy-MM'}" required />
            </div>

            <div class="form-group col">
                <label for="departmentId">业务所属部门<i class="red">*</i></label>
                <select id="departmentId"  name="departmentId" class="form-control" required></select>
                <#bcomboProvider _log="业务所属部门" _id="departmentId" _provider="authDepartmentProvider"  _value="${meterDetail.departmentId!}"/>
            </div>

            <div class="form-group col">
                <label for="number">表编号</label>
                <#bautoCompleteProvider _hiddenDomainId="assetsId" _hiddenDomainName="assetsId" _displayDomainId="number" _displayDomainName="number" _placeholder=""  _optionVariable="numberAutoCompleteOption" _text="${meterDetail.number!}" _required="true"/>
            </div>

            <div class="form-group col">
                <label for="assetsType">类别</label>
                <select id="assetsType"  name="assetsType" class="form-control" readonly ></select>
                <#bcomboProvider _log="类别" _id="assetsType" _provider="assetsTypeProvider" _value="${meterDetail.assetsType!}"/>
            </div>
            <div class="form-group col">
                <label for="assetsName">表地址</label>
                <input type="text" class="form-control" id="assetsName" name="assetsName" value="${meterDetail.assetsName}" readonly />
            </div>

            <div class="form-group col">
                <label for="customerCellphone">手机号码</label>
                <input type="text" class="form-control isMobile" id="customerCellphone" name="customerCellphone" value="${meterDetail.customerCellphone}" />
            </div>
            <div class="form-group col">
                <label for="customerName">客户名称</label>
                <input type="text" class="form-control" id="customerName" name="customerName" value="${meterDetail.customerName}" readonly />
            </div>

            <input type="hidden" id="meterId" name="meterId">
            <input type="hidden" id="customerId" name="customerId">

            <div class="form-group col">
                <label for="lastAmount">上期指数</label>
                <input type="text" class="form-control" id="lastAmount" name="lastAmount" value="${meterDetail.lastAmount}" readonly />
            </div>
            <div class="form-group col">
                <label for="thisAmount">本期指数<i class="red">*</i></label>
                <input type="number" class="form-control" id="thisAmount" name="thisAmount" value="${meterDetail.thisAmount}" required />
            </div>
            <div class="form-group col">
                <label for="usageAmount">用水量</label>
                <input type="text" class="form-control" id="usageAmount" name="usageAmount" value="${meterDetail.usageAmount}" readonly />
            </div>
            <div class="form-group col">
                <label for="price">单价<i class="red">*</i></label>
                <input type="text" class="form-control" id="price" name="price" value="${meterDetail.price}" readonly />
            </div>
            <div class="form-group col">
                <label for="receivable">水费</label>
                <input type="text" class="form-control" id="receivable" name="receivable" value="${meterDetail.receivable}" readonly />
            </div>

            <%
            if(meterDetail.businessChargeItems.~size>0){
            for(item in meterDetail.businessChargeItems){%>
            <div class="form-group col">
                <label for="amount" class="">${item.chargeItemName!}<i class="red">*</i></label> <input id="chargeItem_${item.chargeItemId!}" type="number" class="form-control chargeItem money" name="chargeItem_${item.chargeItemId!}" item-id="${item.id!}" chargeItem="${item.chargeItemName!}" value = "<#centToYuan value='${item.amount!}'/>" range="0 9999999.99" required />
            </div>
            <% } } %>

            <div class="form-group col">
                <label for="amount">合计金额</label>
                <input type="text" class="form-control" id="amount" name="amount" value="${meterDetail.amount}" readonly />
            </div>
            <div class="form-group col">
                <label for="recordTime">抄表日期</label>
                <input type="text" class="form-control" id="recordTime" name="recordTime" value="${meterDetail.recordTime!,localDateTimeFormat='yyyy-MM-dd'}" />
            </div>
            <div class="form-group col">
                <label for="recorderName">抄表员</label>
                <input type="text" class="form-control" id="recorderName" name="recorderName" value="${meterDetail.recorderName}" />
            </div>
            <div class="form-group col">
                <label _log for="notes">备注<i class="red">*</i></label>
                <input type="text" class="form-control" id="notes" name="notes" value="${meter.notes!}" />
            </div>
        </div>

    </form>
</div>

</#bs4Body>

<#js_customerAutocompleteJs/>

<#meterDetail_preSaveJs />