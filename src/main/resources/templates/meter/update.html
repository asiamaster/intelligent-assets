<#bs4Body>

<div class="container-fluid">
    <input type="hidden" id="_sourceChannel" value="<#config name='ia.source.channel.meter'/>">
    <form id="updateForm" role="form" novalidate>
        <input type="hidden" name="id" value="${meter.id!}">
        <input type="hidden" name="version" value="${meter.version!}">

        <div class="breadcrumb" >
            表信息 <a href="javascript:;" class="ml-2" id="getCustomer"></a>
            <a href="javascript:;" class="ml-auto" data-toggle="collapse" data-target="#customerInfo" aria-expanded="true"
               aria-controls="customerInfo">收起 <i class="fa fa-angle-double-up" aria-hidden="true"></i></a>
        </div>
        <div class="row row-cols-4 collapse show" id="customerInfo">

            <div class="form-group col">
                <label _log for="number">表编号<i class="red">*</i></label>
                <input type="text" class="form-control" id="number" name="number" value="${meter.number!}" required />
            </div>

            <div class="form-group col">
                <label for="type">表类型</label>
                <select id="type"  name="type" class="form-control" required disabled></select>
                <#bcomboProvider _log="表类型" _id="type" _provider="meterTypeProvider" _value="${meter.type!}"/>
            </div>

            <div class="form-group col">
                <label for="departmentId">业务所属部门</label>
                <select id="departmentId"  name="departmentId" class="form-control" required></select>
                <#bcomboProvider _log="业务所属部门" _id="departmentId" _provider="authDepartmentProvider" _value="${meter.departmentId!}"/>
            </div>

            <div class="form-group col">
                <label for="assetsId">类别</label>
                <select id="assetsId"  name="assetsId" class="form-control" required ></select>
                <#bcomboProvider _log="类别" _id="assetsId" _provider="assetsTypeProvider" _value="${meter.assetsId!}"/>
            </div>
            <div class="form-group col">
                <label _log  for="initAmount">表初始值<i class="red">*</i></label>
                <input type="text" class="form-control" id="initAmount" name="initAmount" value="${meter.initAmount!}" required />
            </div>
        </div>

        <div class="breadcrumb">
            对应摊位
            <a href="javascript:;" class="ml-auto" data-toggle="collapse" data-target="#boothInfo" aria-expanded="true" aria-controls="boothInfo">收起 <i class="fa fa-angle-double-up" aria-hidden="true"></i></a>
        </div>
        <div id="boothInfo" class="collapse show">
            <table class="table table-bordered table-hover table-striped" id="boothTable"  _logTable="摊位项">
                <thead>
                <tr>
                    <th class="text-center align-middle" style="width: 5%"><a id="addBooth" href="javascript:;" style="padding: 8px 18px;"><i class="fa fa-plus-square fa-lg"></i></a></th>
                    <th style="width: 25%;font-weight:normal; ">摊位编号</th>
                </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>

        <div class="breadcrumb">
            金额信息
            <a href="javascript:;" class="ml-auto" data-toggle="collapse" data-target="#moneyInfo" aria-expanded="true" aria-controls="moneyInfo">收起 <i class="fa fa-angle-double-up" aria-hidden="true"></i></a>
        </div>
        <div class="row  row-cols-4 collapse show" id="moneyInfo">
            <div class="form-group col">
                <label _log for="price">单价<i class="red">*</i></label>
                <input type="text" class="form-control" id="price" name="price" value="${meter.price!}" required />
            </div>

            <div class="form-group col">
                <label _log for="notes">备注<i class="red">*</i></label>
                <input type="text" class="form-control" id="notes" name="notes" value="${meter.notes!}" required />
            </div>
        </div>

        <div class="text-right btn-r-b">
            <button type="button" class="btn btn-secondary px-5" onclick="javascript: parent.dia.hide()">取消</button>
            <button type="button" class="btn btn-primary px-5" onclick="bui.util.debounce(doUpdateEarnestHandler,1000,true)()" id="formSubmit">保存</button>
        </div>
    </form>
</div>

</#bs4Body>

<#meter_updateJs />

<script  id="boothItem"  type="text/html">
    <tr data-index="{{index}}">
        <td class="text-center align-middle"><a href="javascript:;" class="item-del" style="padding: 8px 18px;"><i class="fa fa-minus-square fa-lg"></i></a></td>
        <td style="padding: .25rem!important;">
            <#bautoCompleteProvider _log="摊位编号" _escape="true" _hiddenDomainId="assetsId_{{index}}" _hiddenDomainName="assetsId_{{index}}" _displayDomainId="assetsName_{{index}}" _displayDomainName="assetsName_{{index}}"  _valueField="id" _textField="name" _value="{{boothId}}" _text="{{boothName}}" _placeholder="" _validatorMethod="isSelected"  _optionVariable="boothAutoCompleteOption"/>
        </td>

    </tr>
</script>

<script  id="initBoothItem"  type="text/html">
    <tr data-index="{{index}}">
        <td class="text-center align-middle"><a href="javascript:;" class="item-del" style="padding: 8px 18px;"><i class="fa fa-minus-square fa-lg"></i></a></td>
        <td style="padding: .25rem!important;">
            <#bautoCompleteProvider _log="摊位编号" _escape="true" _hiddenDomainId="assetsId_{{index}}" _hiddenDomainName="assetsId_{{index}}" _displayDomainId="assetsName_{{index}}" _displayDomainName="assetsName_{{index}}"  _valueField="id" _textField="name" _value="{{assetsId}}" _text="{{assetsName}}" _placeholder="" _validatorMethod="isSelected"  _optionVariable="boothAutoCompleteOption"/>
        </td>

    </tr>
</script>
