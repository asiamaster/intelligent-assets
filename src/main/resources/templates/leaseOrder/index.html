<#bs4Body>
<style>
    .w-200px{width: 200px!important;}
    .w-100px{width: 100px!important;}
    .detail{width: 12px!important;}
</style>
<!--
 内联元素:让元素排成一行显示出来，且高度和宽度由内容决定，不能用css控制
 块状元素:独立占一行
 内联元素与块状元素对立
 内联(inline)表单:表单排在一行显示，只有在from中指定  class="form-inline"即可让表单成内联显示
      一定要添加 label 标签
      如果你没有为每个输入控件设置 label 标签，屏幕阅读器将无法正确识别。对于这些内联表单，你可以通过为 label 设置 .sr-only 类将其隐藏。还有一些辅助技术提供label标签的替代方案，比如 aria-label、aria-labelledby 或 title 属性。如果这些都不存在，屏幕阅读器可能会采取使用 placeholder 属性，如果存在的话，使用占位符来替代其他的标记，但要注意，这种方法是不妥当的。
-->
<!--注意label中的for 与 input中的保持一致-->
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <nav>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item active">
                        摊位出租管理
                    </li>
                </ol>
            </nav>
            <form id="queryForm" role="form" class="form-inline" novalidate>
                <div class="form-group mb-2 mr-5">
                    <label for="state" class="justify-content-end mr-2 w-100px">业务状态:</label>
                    <select id="state" name="state" class="form-control w-200px"></select>
                    <#bcomboProvider _id="state" _provider="leaseOrderStateProvider" _value=""/>
                </div>
                <div class="form-group mb-2 mr-5">
                    <label for="payState" class="justify-content-end mr-2 w-100px">交费状态:</label>
                    <select id="payState" name="payState" class="form-control w-200px"></select>
                    <#bcomboProvider _id="payState" _provider="payStateProvider" _value=""/>
                </div>
                <div class="form-group mb-2 mr-5">
                    <label for="likeCustomerName" class="justify-content-end mr-2 w-100px">客户名称:</label>
                    <input type="text" class="form-control" name="likeCustomerName" id="likeCustomerName"/>
                </div>
                <div class="form-group mb-2 mr-5">
                    <label for="stallName" class="justify-content-end mr-2 w-100px">摊位编号:</label>
                    <input type="text" class="form-control" name="stallName" id="stallName"/>
                </div>
                <div class="form-group mb-2 mr-5">
                    <label for="code" class="justify-content-end mr-2 w-100px">业务单号:</label>
                    <input type="text" class="form-control" name="code" id="code"/>
                </div>
                <div class="form-group mb-2 mr-5">
                    <label for="createdStart" class="justify-content-end mr-2 w-100px">创建时间:</label>
                    <div class="input-group">
                        <input type="text" name="createdStart" id="createdStart" class="form-control date"/>
                        <div class="input-group-append">
                            <label for="createdStart"  class="input-group-text fa fa-calendar"></label>
                        </div>
                    </div>&nbsp;&nbsp;至&nbsp;&nbsp;
                    <div class="input-group" id="datetimepicker3">
                        <input type="text" name="createdEnd" id="createdEnd" class="form-control date" value=""/>
                        <div class="input-group-append">
                            <label for="createdEnd"  class="input-group-text fa fa-calendar"></label>
                        </div>
                    </div>
                </div>
                <div class="btn-group mb-2">
                    <button id="query" type="button" class="btn btn-success mr-1" onclick="queryDataHandler()"><i class="fa fa-search"></i> 查询</button>
                    <button id="clear" type="button" class="btn btn-danger" onclick="javascript:$('#queryForm')[0].reset();"><i class="fa fa-trash-o"></i> 清除</button>
                </div>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <div id="toolbar" class="btn-group" role="group" aria-label="Toolbar with button groups">
                <button id="btn_view" type="button" class="btn btn-primary" onclick=""><i class="fa fa-eye"></i> 查看</button>
                <button id="btn_add" type="button" class="btn btn-primary" onclick="openInsertHandler()"><i class="fa fa-plus"></i> 新增</button>
                <button id="btn_edit" type="button" class="btn btn-primary" onclick="openUpdateHandler()"><i class="fa fa-pencil-square-o"></i> 修改</button>
                <button id="btn_cancel" type="button" class="btn btn-primary" onclick=""><i class="fa fa-ban"></i> 取消</button>
                <button id="btn_submit" type="button" class="btn btn-primary" onclick=""><i class="fa fa-paper-plane"></i> 提交付款</button>
                <button id="btn_withdraw" type="button" class="btn btn-primary" onclick=""><i class="fa fa-undo"></i> 撤回</button>
                <button id="btn_supplement" type="button" class="btn btn-primary" onclick=""><i class="fa fa-paint-brush"></i> 补录</button>
                <button id="btn_renew" type="button" class="btn btn-primary" onclick=""><i class="fa fa-plug"></i> 续租</button>
                <button id="btn_refund_apply" type="button" class="btn btn-primary" onclick=""><i class="fa fa-reply"></i> 退款申请</button>
            </div>
            <table id="grid" data-toggle="table" data-title="租赁单列表" class="table" data-toolbar="#toolbar" data-pagination="true" data-page-number="1" data-page-size="10"
                   data-query-params="queryParams" data-side-pagination="server" data-method="POST" data-content-type="application/x-www-form-urlencoded" data-single-select="true"
                   data-click-to-select="true"  data-checkbox-header="true" data-unique-id="id" data-sort-name="id" data-sort-order="desc"  data-icons="bui.variable.icons" data-buttons-class="primary"
                   data-show-refresh="true" data-show-fullscreen="true" data-show-columns="true" data-detail-view="true"
            >
                <thead>
                <tr>
                    <th data-checkbox="true"></th>
                    <th data-field="id" data-sortable="true" data-align="center" data-width-unit="%">
                        ID
                    </th>
                    <th data-field="code" data-sortable="true" data-align="center" data-width-unit="%">
                        业务单号
                    </th>
                    <th data-field="departmentName" data-sortable="true" data-align="center">
                        业务所属部门
                    </th>
                    <th data-field="customerName" data-sortable="true" data-align="center">
                        客户名称
                    </th>
                    <th data-field="customerCellphone" data-sortable="true" data-align="center" data-visible="false">
                        联系电话
                    </th>
                    <th data-field="leaseTerm" data-sortable="true" data-align="center" data-visible="false">
                        租赁期限
                    </th>
                    <th data-field="startTime" data-sortable="true" data-align="center" data-provider="dateProvider">
                        开始日期
                    </th>
                    <th data-field="endTime" data-sortable="true" data-align="center" data-provider="dateProvider">
                        结束日期
                    </th>
                    <th data-field="state" data-sortable="true" data-align="center" data-provider="leaseOrderStateProvider">
                        业务状态
                    </th>
                    <th data-field="payState" data-sortable="true" data-align="center" data-provider="payStateProvider">
                        交费状态
                    </th>
                    <th data-field="totalAmount" data-sortable="true" data-align="center">
                        合计金额
                    </th>
                    <th data-field="depositDeduction" data-sortable="true" data-align="center" data-visible="false">
                        保证金抵扣
                    </th>
                    <th data-field="earnestDeduction" data-sortable="true" data-align="center" data-visible="false">
                        定金抵扣
                    </th>
                    <th data-field="transferDeduction" data-sortable="true" data-align="center" data-visible="false">
                        转抵扣
                    </th>
                    <th data-field="payAmount" data-sortable="true" data-align="center">
                        实付金额
                    </th>
                    <th data-field="paidAmount" data-sortable="true" data-align="center">
                        已付金额
                    </th>
                    <th data-field="waitAmount" data-sortable="true" data-align="center">
                        待付金额
                    </th>
                    <th data-field="creator" data-sortable="true" data-align="center" data-visible="false">
                        创建人
                    </th>
                    <th data-field="createTime" data-sortable="true" data-align="center" data-provider="datetimeProvider" data-visible="false">
                        创建时间
                    </th>
                </tr>
                </thead>
            </table>
        </div>
    </div>
</div>


<div class="modal fade" id="_modal" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <!--modal-lg modal-sm(默认) 通过设置mw大小调整宽度（如mw-100） modal-dialog-centered垂直居中-->
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <!-- 标题 -->
                <h5 class="modal-title" id="exampleModalLabel">客户新增</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="_form" method="post" class="form-horizontal" action="">
                    <input name="_id" id="_id" type="hidden">
                    <div class="form-group row">
                        <label class="col-2 col-form-label text-right" for="_code">客户编号</label>
                        <div class="col-10">
                            <input type="text" class="form-control" id="_code" name="_code" placeholder="如：001" required/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-2 col-form-label text-right" for="_name">客户名称</label>
                        <div class="col-10">
                            <input type="text" class="form-control" id="_name" name="_name" placeholder="如：张三" required/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-2 col-form-label text-right" for="_cellphone">手机号</label>
                        <div class="col-10">
                            <input type="text" class="form-control" id="_cellphone" name="_cellphone" placeholder="如：13888888888" required/>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label class="col-2 col-form-label text-right" for="_certificateNumber">证件号</label>
                        <div class="col-10">
                            <input type="text" class="form-control" id="_certificateNumber" name="_certificateNumber" placeholder="如：511602198902244293" required/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-2 col-form-label text-right" for="_birthdate">出生日期</label>
                        <div class="col-10">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <label for="_birthdate"  class="input-group-text fa fa-calendar"></label>
                                </div>
                                <input type="text" name="_birthdate" id="_birthdate" class="form-control date" required/>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-2 col-form-label text-right" for="_certificateAddrDisplay">证件地址</label>
                        <div class="col-10">
                            <#bautoCompleteProvider _hiddenDomainId="_certificateAddr" _hiddenDomainName="_certificateAddr" _displayDomainId="_certificateAddrDisplay" _placeholder="" _provider="cityProvider" _validatorMethod="isSelected" _value="" _text="" _required="true" _option="width:630"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-2 col-form-label text-right">状态</label>
                        <div class="col-10 pt-2" id="_state">
                            <!--<div class="custom-control custom-radio custom-control-inline">
                                <input type="radio" id="customRadioInline1" value="1" name="customRadioInline1" class="custom-control-input" required>
                                <label class="custom-control-label" for="customRadioInline1">水果</label>
                            </div>
                            <div class="custom-control custom-radio custom-control-inline">
                                <input type="radio" id="customRadioInline2" value="2" name="customRadioInline1" class="custom-control-input">
                                <label class="custom-control-label" for="customRadioInline2">蔬菜</label>
                            </div>
                            <div class="custom-control custom-radio custom-control-inline">
                                <input type="radio" id="customRadioInline3" value="3" name="customRadioInline1" class="custom-control-input">
                                <label class="custom-control-label" for="customRadioInline3">海鲜</label>
                            </div>-->
                            <#bradioGroupProvider _containerId="_state" _name="_state" _provider="enabledStateProvider" _required="true"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-2 col-form-label text-right">性别</label>
                        <div class="col-10 pt-2" id="_sex">
                            <#bradioGroupProvider _containerId="_sex" _name="_sex" _provider="sexProvider" _required="true"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-2 col-form-label text-right">证件类型</label>
                        <div class="col-10 pt-2" id="_certificateType">
                            <#bradioGroupProvider _containerId="_certificateType" _name="_certificateType" _provider="certificateTypeProvider" _required="true"/>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="saveOrUpdateHandler()">提交</button>
            </div>
        </div>
    </div>
</div>

</div>
</#bs4Body>
<#leaseOrder_indexJs />
<script id="subTable" type="text/html">
    <div class="px-3 pb-3">
        <div id="toolbar{{index}}" class="btn-group" role="group" aria-label="Toolbar with button groups">
            <button id="btn_refund_apply{{index}}" type="button" class="btn btn-primary" onclick=""><i
                    class="fa fa-reply"></i> 退款申请
            </button>
            <button id="btn_stop_rent{{index}}" type="button" class="btn btn-primary" onclick="doEnableHandler(false)"><i
                    class="fa fa-stop"></i> 停租
            </button>
        </div>
        <table id="subGrid{{index}}" data-id="subGrid{{index}}" data-toggle="table" data-title="客户列表" class="table" data-toolbar="#toolbar{{index}}"
               data-pagination="false" data-page-number="1" data-page-size="10"
               data-query-params="subQueryParams" data-method="POST"
               data-content-type="application/x-www-form-urlencoded" data-single-select="true"
               data-click-to-select="true" data-checkbox-header="true" data-unique-id="id" data-sort-name="id"
               data-sort-order="desc" data-icons="bui.variable.icons"
               data-show-refresh="true" data-show-fullscreen="true"
               data-buttons-class="primary"
        >
            <thead>
            <tr>
                <th data-checkbox="true"></th>
                <th data-field="stallName" data-sortable="true" data-align="center">
                    摊位编号
                </th>
                <th data-field="districtName" data-sortable="true" data-align="center">
                    区域
                </th>
                <th data-field="number" data-sortable="true" data-align="center">
                    数量
                </th>
                <th data-field="unitName" data-sortable="true" data-align="center">
                    单位
                </th>
                <th data-field="rentAmount" data-sortable="true" data-align="center">
                    租金
                </th>
                <th data-field="manageAmount" data-sortable="true" data-align="center">
                    物业管理费
                </th>
                <th data-field="depositRefundAmount" data-sortable="true" data-align="center">
                    保证金
                </th>
                <th data-field="state" data-sortable="true" data-align="center" data-provider="leaseOrderStateProvider">
                    状态
                </th>
            </tr>
            </thead>
        </table>
    </div>
</script>