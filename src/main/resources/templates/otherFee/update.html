<#bs4Body>
    <div class="container-fluid pb-5">
        <input type="hidden" id="_sourceChannel" value="<#config name='ia.source.channel.otherFee'/>">
        <form id="saveForm" role="form" novalidate class="pb-5">
            <input type="hidden" name="id" value="${otherFee.id!}">
            <input type="hidden" name="version" value="${otherFee.version!}">
            <div class="breadcrumb" >
                客户信息 <a href="javascript:;" class="ml-2" id="getCustomer">刷卡获取</a>
            </div>
            <div class="row row-cols-4"  id="customerInfo">
                <div class="form-group col">
                    <label for="customerName">客户名称<i class="red">*</i></label>
                    <#bautoCompleteProvider _hiddenDomainId="customerId" _hiddenDomainName="customerId" _displayDomainId="customerName" _displayDomainName="customerName" _placeholder="" _validatorMethod="isSelected" _optionVariable="customerNameAutoCompleteOption" _value="${otherFee.customerId!}" _text="${otherFee.customerName!}" _required="true"/>
                </div>

                <div class="form-group col">
                    <label for="certificateNumber">证件号码<i class="red">*</i></label>
                    <#bautoCompleteProvider _hiddenDomainId="certificateNumber" _hiddenDomainName="certificateNumber" _displayDomainId="_certificateNumber" _displayDomainName="_certificateNumber"  _validatorMethod="isSelected" _optionVariable="certificateNumberAutoCompleteOption" _value="${otherFee.certificateNumber}" _text="${otherFee.certificateNumber!}" _required="true"/>
                </div>
            
                <div class="form-group col">
                    <label for="customerCellphone">联系电话<i class="red">*</i></label>
                    <input type="text" class="form-control isMobile" id="customerCellphone" name="customerCellphone" value="${otherFee.customerCellphone}" required />
                </div>

            </div>
            <div class="breadcrumb">
                基础信息
            </div>
            <div class="row row-cols-4 collapse show" id="baseInfo">
                <div class="form-group col">
                    <label for="departmentId">业务所属部门<i class="red">*</i></label>
                    <select id="departmentId"  name="departmentId" class="form-control" required></select>
                    <#bcomboProvider _id="departmentId" _provider="authDepartmentProvider" _value="${otherFee.departmentId!}"/>
                </div>
                <div class="form-group col">
                    <label for="chargeItemId">收费项目<i class="red">*</i></label>
                    <select id="chargeItemId"  name="chargeItemId" class="form-control"  required >
                    </select>
                </div>

                <%if(@com.dili.uap.sdk.session.SessionContext.getSessionContext().getUserTicket().getFirmCode() == @com.dili.ia.glossary.MarketEnum.SY.getCode()){%>
                <div class="form-group col-6">
                    <label for="" _log>所属区域<i class="red">*</i></label>
                    <#js_district _firstDistrictName="firstDistrictId" _secondDistrictName="secondDistrictId" _firstDistrictTextName="firstDistrictName"  _secondDistrictTextName="secondDistrictName"  _firstDistrictIdValue="${otherFee.firstDistrictId!}"  _secondDistrictIdValue="${otherFee.secondDistrictId!}"  _firstDistrictTextValue="${otherFee.firstDistrictName!}" _secondDistrictTextValue="${otherFee.secondDistrictName!}"></#js_district>
                </div>
                <%}%>

                <div class="form-group col">
                    <label for="assetsType">费用类型<i class="red">*</i></label>
                    <select id="assetsType"  name="assetsType" class="form-control"  required></select>
                    <#bcomboProvider _log="资产类型" _id="assetsType" _provider="assetsTypeProvider" _value="${otherFee.assetsType!}" _queryParams='{emptyText:"-- 请选择 --"}'/>
                </div>
                <div class="form-group col">
                    <label for="assetsName" class="" >费用地址</label>
                    <#bautoCompleteProvider _log="费用地址" _displayDomainClass="${otherFee.assetsType == 100? 'd-none' : ''}"  _value="${otherFee.assetsId!}" _text="${otherFee.assetsName!}" _hiddenDomainId="assetsId" _hiddenDomainName="${otherFee.assetsType != 100? 'assetsId' : ''}" _displayDomainId="assetsName" _displayDomainName="${otherFee.assetsType != 100? 'assetsName' : ''}"  _placeholder="" _validatorMethod="isSelected" _optionVariable="boothAutoCompleteOption"/>
                    <input id="assetsNameInput" type="text" class="form-control <%if (otherFee.assetsType != 100){%> d-none"  <%} else {%> " name="assetsName" <%}%> value="${otherFee.assetsName!}"  />
                </div>

                <div class="form-group col">
                    <label for="startTime">开始日期</label>
                    <input type="text" id="startTime" name="startTime" class="form-control laydate laystart" value="${otherFee.startTime!,localDateTimeFormat='yyyy-MM-dd'}" >
                </div>
                <div class="form-group col">
                    <label for="endTime">结束日期</label>
                    <input type="text" id="endTime" name="endTime" class="form-control laydate layend" value="${otherFee.endTime!,localDateTimeFormat='yyyy-MM-dd'}" >
                </div>
                <div class="form-group col">
                    <label for="categoryName" _log>经营品类</label>
                    <#bautoCompleteProvider _hiddenDomainId="categoryId" _hiddenDomainName="categoryId" _displayDomainId="categoryName" _displayDomainName="categoryName" _placeholder="" _validatorMethod="isSelected" _optionVariable="categoryAutoCompleteOption" _value="${otherFee.categoryId!}"  _text="${otherFee.categoryName!}"/>
                </div>
                <div class="form-group col">
                    <label for="amount" class="">金额<i class="red">*</i></label>
                    <input id="amount" type="number" class="form-control floatReserve money"name="amount" range="0 9999999.99"  value="<#centToYuan value='${otherFee.amount}'/>"  required />
                </div>
                <div class="form-group col-12">
                    <label for="notes">备注</label>
                    <input id="notes" class="form-control" name="notes" rows="2" maxlength="100" value="${otherFee.notes!}"></input>
                </div>
            </div>
            <div class="modal-footer-wrap">
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary px-5" onclick="javascript: parent.dia.hide()">取消</button>
                    <button type="button" class="btn btn-primary px-5" id="save">确定</button>
                </div>
            </div>
        </form>
    </div>

</#bs4Body>

<#js_customerAutocompleteJs/>
<#js_districtAssetsLinkage/>
<#otherFee_updateJs />
