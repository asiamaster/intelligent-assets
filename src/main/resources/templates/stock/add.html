<#bs4Body>
	<div class="container-fluid" value="${type!}">
		<input type="hidden" id="_sourceChannel" value="<#config name='ia.source.channel.earnest_order'/>">
		<form id="saveForm" role="form" novalidate>
			<div class="breadcrumb">
				客户信息 <a href="javascript:;" class="ml-2" id="getCustomer">刷卡获取</a> <a href="javascript:;" class="ml-auto"
				 data-toggle="collapse" data-target="#customerInfo" aria-expanded="true" aria-controls="customerInfo">收起 <i class="fa fa-angle-double-up"
					 aria-hidden="true"></i></a>
			</div>
			<div class="row row-cols-4 collapse show" id="customerInfo">
				<div class="form-group col">
					<label for="customerName">客户名称<i class="red">*</i></label>
					<#bautoCompleteProvider _hiddenDomainId="customerId" _hiddenDomainName="customerId" _displayDomainId="customerName"
					 _displayDomainName="customerName" _placeholder="" _validatorMethod="isSelected" _optionVariable="customerNameAutoCompleteOption"
					 _required="true" />
				</div>
				<div class="form-group col">
					<label for="">联系电话<i class="red">*</i></label> <input type="text" class="form-control isMobile" id="customerCellphone"
					 name="customerCellphone" required />
				</div>
			</div>

			<div class="breadcrumb">
				入库基本信息 <a href="javascript:;" class="ml-auto" data-toggle="collapse" data-target="#baseInfo" aria-expanded="true"
				 aria-controls="baseInfo">收起 <i class="fa fa-angle-double-up" aria-hidden="true"></i></a>
			</div>
			<div class="row row-cols-4 collapse show" id="baseInfo">
				<div class="form-group col">
					<label for="departmentId">业务所属部门<i class="red">*</i></label> <select id="departmentId" name="departmentId" class="form-control"
					 required></select>
					<#bcomboProvider _id="departmentId" _provider="authDepartmentProvider" />
				</div>
				
				<div class="form-group col">
                	<label for="categoryId">品类<i class="red">*</i></label>
                	<select id="categoryId" name="categoryId" class="form-control">
                	</select>
               		<#bselect2 _id="categoryId" _mode="remote" _optionVariable="categoryAutoCompleteOption" />
            	</div>
				<div class="form-group col">
					<label for="">产地<i class="red">*</i></label> <input type="text" class="form-control" id="origin" name="origin"
					 required />
				</div>
				<div class="form-group col">
					<label for="quantity" class="">总件数<i class="red">*</i></label> <input id="quantity" type="number" class="form-control"
					 name="quantity" range="0 9999999" required readonly />
				</div>
				<div class="form-group col">
					<label for="weight" class="">总总量<i class="red">*</i></label> <input id="weight" type="number" class="form-control"
					 name="weight" range="0 9999999" required readonly />
				</div>
				<div class="form-group col">
					<label for="amount" class="">总金额<i class="red">*</i></label> <input id="amount" type="number" class="form-control"
					 name="amount" range="0 9999999.99" required readonly />
				</div>
				<div class="form-group col">
					<label for="stockInDate">入库日期</label> <input type="text" id="stockInDate" name="stockInDate" class="form-control laydate laystart">
				</div>
				<div class="form-group col">
					<label for="expireDate">到期日期</label> <input type="text" id="expireDate" name="expireDate" class="form-control laydate layend"
					 readonly>
				</div>
			</div>

			<div class="text-left btn-r-b">
				<button type="button" class="btn btn-secondary px-5" id="adddetailItem">添加子单信息</button>
			</div>
			<div class="text-right btn-r-b">
				<button type="button" class="btn btn-secondary px-5" onclick="javascript: parent.dia.hide()">取消</button>
				<button type="button" class="btn btn-primary px-5" onclick="bui.util.debounce(doAddEarnestHandler,1000,true)()" id="formSubmit">保存</button>
			</div>
		</form>
		<div class="breadcrumb">
			子单信息 <a href="javascript:;" class="ml-auto" data-toggle="collapse" data-target="#details" aria-expanded="true"
			 aria-controls="details">收起
				<i class="fa fa-angle-double-up" aria-hidden="true"></i>
			</a>
		</div>
		<div class="collapse show" id="details"></div>
	</div>

</#bs4Body>
<#js_customerAutocompleteJs />
<#stock_validate />
<#stock_addJs />
<#stock_item />
