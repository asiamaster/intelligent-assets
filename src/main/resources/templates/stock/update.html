<#bs4Body>
	<!--<a href="javascript:;" id="goCustomerRegister">无此客户，点击注册</a>-->
	<div class="container-fluid" value="${type!}">
		<input type="hidden" id="_sourceChannel" value="<#config name='ia.source.channel.earnest_order'/>">
		<form id="saveForm" role="form" novalidate>
			<div class="breadcrumb">
				客户信息 
			</div>
			<div class="row row-cols-4 collapse show" id="customerInfo">
				<div class="form-group col-4">
					<label for="customerName">客户名称<i class="red">*</i></label>
					<input type="hidden" class="" id="customerId"
					 name="customerId" value="${stockIn.customerId!}" readonly required />
				
					<input type="text" class="form-control" id="customerName"
					 name="customerName" value="${stockIn.customerName!}" readonly required />
				</div>
				
				<div class="form-group col-4">
					<label for="">联系电话<i class="red">*</i></label> <input type="text" class="form-control isMobile" id="customerCellphone"
					 name="customerCellphone" value="${stockIn.customerCellphone!}"  required />
				</div>
			</div>

			<div class="breadcrumb">
				入库基本信息 <a href="javascript:;" class="ml-auto" data-toggle="collapse" data-target="#baseInfo" aria-expanded="true"
				 aria-controls="baseInfo">收起 <i class="fa fa-angle-double-up" aria-hidden="true"></i></a>
			</div>
			<div class="row row-cols-4 collapse show" id="baseInfo">
				<div class="form-group col-4">
					<label for="">入库单号<i class="red">*</i></label> <input type="text" class="form-control" id="code"
					 name="code" value="${stockIn.code!}"  readonly required />
				</div>
				
				<div class="form-group col-4">
					<input type="hidden" class="form-control" id=""
					 name="type" value="${stockIn.type!}"  readonly required />
					<label for="">入库类型<i class="red">*</i></label> <input type="text" class="form-control" id="type"
					  value="${@com.dili.ia.glossary.StockInTypeEnum.getStockInTypeEnum(stockIn.type).getName()}"  readonly required />
				</div>
				<div class="form-group col-4">
					<label for="">操作员<i class="red">*</i></label>
					<input type="hidden" id="operatorId" name="operatorId" value="${stockIn.operatorId!}" />
					 <input type="text" class="form-control" id="operatorName"
					 name="operatorName" value="${stockIn.operatorName!}"  readonly required />
				</div>
				<div class="form-group col-4">
					<label for="departmentId" value="${stockIn.departmentId!}" >业务所属部门<i class="red">*</i></label> 
					<select id="departmentId" name="departmentId" class="form-control" required></select>
					<#bcomboProvider _id="departmentId" _provider="authDepartmentProvider"  _value="${stockIn.departmentId!}"/>
				</div>
				<div class="form-group col-4">
					<label for="categoryId">品类<i class="red">*</i></label>
					<#bautoCompleteProvider _hiddenDomainId="categoryId" _hiddenDomainName="categoryId" _displayDomainId="categoryName"
					 _displayDomainName="categoryName" _placeholder="" _validatorMethod="isSelected" _optionVariable="categoryAutoCompleteOption"
					 _required="true" _value="${stockIn.categoryId!}" _text="${stockIn.categoryName!}" />
				</div>
				
				<div class="form-group col-4">
					<label for="">产地<i class="red">*</i></label> <input type="text" class="form-control" id="origin" name="origin"
					 value="${stockIn.origin!}" required />
				</div>
				<div class="form-group col-4">
					<label for="quantity" class="">总件数<i class="red">*</i></label> <input id="quantity" type="number" class="form-control"
					 name="quantity" range="0 9999999" value="${stockIn.quantity!}" required readonly />
				</div>
				<div class="form-group col-4">
					<label for="weight" class="">总总量<i class="red">*</i></label> <input id="weight" type="number" class="form-control"
					 name="weight" range="0 9999999" value="${stockIn.weight!}" required readonly />
				</div>
				<div class="form-group col-4">
					<label for="amount" class="">总金额<i class="red">*</i></label> <input id="amount" type="number" class="form-control money"
					 name="amount" range="0 9999999.99" value="<#centToYuan value='${stockIn.amount!}'/>" required readonly />
				</div>
				<%if(isNotEmpty(stockIn.businessChargeItems) && stockIn.businessChargeItems.~size>0){
		        for(item in stockIn.businessChargeItems){
		        %>		        
		        <div class="form-group col-4">
					<label for="amount" class="">${item.chargeItemName!}<i class="red">*</i></label> <input id="chargeItem_${item.chargeItemId!}" type="number" class="form-control chargeItem money"
					 name="chargeItem_${item.chargeItemId!}" item-id="${item.id!}" chargeItem="${item.chargeItemName!}" value = "<#centToYuan value='${item.amount!}'/>" range="0 9999999.99" required readonly />				
		        </div>
		        <% } }%>
				<div class="form-group col-4">
					<label for="expireDate">到期日期</label> <input type="text" id="expireDate" name="expireDate" class="form-control laydate layend"
					value="${stockIn.expireDate!,localDateTimeFormat='yyyy-MM-dd'}"  readonly>
				</div>
				
			</div>

			<div class="text-left btn-r-b">
				<button type="button" class="btn btn-secondary px-5" id="adddetailItem">添加子单信息</button>
			</div>
			<div class="text-right btn-r-b">
				<button type="button" class="btn btn-secondary px-5" onclick="javascript: parent.dia.hide()">取消</button>
				<button type="button" class="btn btn-primary px-5" onclick="bui.util.debounce(doAddStockInHandler,1000,true)()" id="formSubmit">保存</button>
			</div>
		</form>
		<div class="breadcrumb">
			子单信息 <a href="javascript:;" class="ml-auto" data-toggle="collapse" data-target="#details" aria-expanded="true"
			 aria-controls="details">收起
				<i class="fa fa-angle-double-up" aria-hidden="true"></i>
			</a>
		</div>
		<div class="collapse show" id="details">
			
		</div>
	</div>

</#bs4Body>
<#js_customerAutocompleteJs />
<#stock_validate />
<#stock_updateJs />
<#stock_item />
<#stock_weight />
<#stock_getCost />

<script id="businessChargeItem" type="text/html">
<div class="form-group col-4">
	<label for="amount" class="">{{chargeItem.chargeItemName}}<i class="red">*</i></label> <input id="chargeItem_{{chargeItem.id}}_{{index}}" type="number" class="form-control amount-item number_change chargeItem money"
		name="chargeItem_{{chargeItem.chargeItemId}}" item-id="{{chargeItem.id}}" chargeItem="{{chargeItem.chargeItemName}}" value="{{chargeItem.amount}}" range="0 9999999.99" required  />
</div>
</script>
