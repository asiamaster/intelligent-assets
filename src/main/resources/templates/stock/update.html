<#bs4Body>
	<!--<a href="javascript:;" id="goCustomerRegister">无此客户，点击注册</a>-->
	<div class="container-fluid" value="${type!}">
		<input type="hidden" id="_sourceChannel" value="<#config name='ia.source.channel.earnest_order'/>">
		<form id="saveForm" role="form" novalidate>
			<div class="breadcrumb">
				客户信息 
			</div>
			<div class="row row-cols-4 collapse show" id="customerInfo">
				<div class="form-group col-4">
					<label for="customerName">客户名称<i class="red">*</i></label>
					<input type="hidden" class="" id="customerId"
					 name="customerId" value="${stockIn.customerId!}" readonly required />
				
					<input type="text" class="form-control isMobile" id="customerName"
					 name="customerName" value="${stockIn.customerName!}" readonly required />
				</div>
				
				<div class="form-group col-4">
					<label for="">联系电话<i class="red">*</i></label> <input type="text" class="form-control isMobile" id="customerCellphone"
					 name="customerCellphone" value="${stockIn.customerCellphone!}"  required />
				</div>
			</div>

			<div class="breadcrumb">
				入库基本信息 <a href="javascript:;" class="ml-auto" data-toggle="collapse" data-target="#baseInfo" aria-expanded="true"
				 aria-controls="baseInfo">收起 <i class="fa fa-angle-double-up" aria-hidden="true"></i></a>
			</div>
			<div class="row row-cols-4 collapse show" id="baseInfo">
				<div class="form-group col-4">
					<label for="">入库单号<i class="red">*</i></label> <input type="text" class="form-control" id="code"
					 name="code" value="${stockIn.code!}"  readonly required />
				</div>
				<div class="form-group col-4">
					<label for="">入库类型<i class="red">*</i></label> <input type="text" class="form-control" id="type"
					 name="type" value="${stockIn.type!}"  readonly required />
				</div>
				<div class="form-group col-4">
					<label for="">操作员<i class="red">*</i></label>
					<input type="hidden" id="operatorId" name="operatorId" value="${stockIn.operatorId!}" />
					 <input type="text" class="form-control" id="operatorName"
					 name="operatorName" value="${stockIn.operatorName!}"  readonly required />
				</div>
				<div class="form-group col-4">
					<label for="departmentId" value="${stockIn.departmentId!}" >业务所属部门<i class="red">*</i></label> 
					<select id="departmentId" name="departmentId" class="form-control" required></select>
					<#bcomboProvider _id="departmentId" _provider="authDepartmentProvider"  _value="${stockIn.departmentId!}"/>
				</div>
				<div class="form-group col-4">
					<label for="categoryId">品类<i class="red">*</i></label>
					<select id="categoryId" name="categoryId" class="form-control" required>
					</select>
					<#bselect2 _id="categoryId" _mode="remote" _optionVariable="categoryAutoCompleteOption" _value="${stockIn.categoryId!}" />
				</div>
				<div class="form-group col-4">
					<label for="">产地<i class="red">*</i></label> <input type="text" class="form-control" id="origin" name="origin"
					 value="${stockIn.origin!}" required />
				</div>
				<div class="form-group col-4">
					<label for="quantity" class="">总件数<i class="red">*</i></label> <input id="quantity" type="number" class="form-control floatReserve"
					 name="quantity" range="0 9999999" value="${stockIn.quantity!}" required readonly />
				</div>
				<div class="form-group col-4">
					<label for="weight" class="">总总量<i class="red">*</i></label> <input id="weight" type="number" class="form-control floatReserve"
					 name="weight" range="0 9999999" value="${stockIn.weight!}" required readonly />
				</div>
				<div class="form-group col-4">
					<label for="amount" class="">总金额<i class="red">*</i></label> <input id="amount" type="number" class="form-control floatReserve"
					 name="amount" range="0 9999999.99" value="${stockIn.amount!}" required readonly />
				</div>
				
				<div class="form-group col-4">
					<label for="expireDate">到期日期</label> <input type="text" id="expireDate" name="expireDate" class="form-control laydate layend"
					value="${stockIn.expireDate!}" data-provider="dateProvider" readonly>
				</div>
				
			</div>

			<div class="text-left btn-r-b">
				<button type="button" class="btn btn-secondary px-5" id="adddetailItem">添加子单信息</button>
			</div>
			<div class="text-right btn-r-b">
				<button type="button" class="btn btn-secondary px-5" onclick="javascript: parent.dia.hide()">取消</button>
				<button type="button" class="btn btn-primary px-5" onclick="bui.util.debounce(doAddEarnestHandler,1000,true)()" id="formSubmit">保存</button>
			</div>
		</form>
		<div class="breadcrumb">
			子单信息 <a href="javascript:;" class="ml-auto" data-toggle="collapse" data-target="#details" aria-expanded="true"
			 aria-controls="details">收起
				<i class="fa fa-angle-double-up" aria-hidden="true"></i>
			</a>
		</div>
		<div class="collapse show" id="details">
			
		</div>
	</div>

</#bs4Body>
<#js_customerAutocompleteJs />
<#stock_updateJs />
<#stock_item />
<!-- 整车入库 -->
<script id="initDetailInfo1" type="text/html">
	<form id="saveForm_{{index}}" role="form" novalidate>
	<div class="row row-cols-12 detail" id="detailInfo_{{index}}">
					<div class="form-group col-4">
						<input type="hidden"  id="code_{{index}}" name="code" value="{{stockDetail.code}}" required  />
						<label for="">接车单号</label> <input type="text" class="form-control" id="pickupNumber" name="pickupNumber" value="{{stockDetail.pickupNumber}}" required />
					</div>
					<div class="form-group col-4">
						<label for="">车型</label> <input type="text" class="form-control" id="carTypePublicCode_{{index}}" name="carTypePublicCode" value="{{stockDetail.carTypePublicCode}}"
						 required />
					</div>
					<div class="form-group col-4">
						<label for="">车牌号</label> <input type="text" class="form-control" id="carPlate_{{index}}" name="carPlate" value="{{stockDetail.carPlate}}" required />
					</div>
					<div class="form-group col-4">
						<label for="">冷库区域：<i class="red">*</i></label>
						<input id="districtId_{{index}}" name="districtId" class="form-control" value="{{stockDetail.districtId}}"
						 required />
						
					</div>
					<div class="form-group col-4">
						<label for="">冷库编号：<i class="red">*</i></label>
						<input id="assetsId_{{index}}" type="text" class="form-control"
						 name="assetsId" value="{{stockDetail.assetsId}}" required />
					</div>
					<div class="form-group col-4">
						<label for="quantity" class="">入库件数：<i class="red">*</i></label> <input id="quantity_{{index}}" type="number" value="{{stockDetail.quantity}}" class="form-control floatReserve"
						 name="quantity" range="0 9999999" required />
					</div>
					<div class="form-group col-4">
						<label for="weight" class="">货物净重(公斤)：<i class="red">*</i></label> <input id="weight_{{index}}" type="number" value="{{stockDetail.weight}}" class="form-control floatReserve"
						 name="weight" range="0 9999999" required />
					</div>
					<div class="form-group col-4">
						<label for="weight" class="">入库金额：<i class="red">*</i></label> <input id="amount_{{index}}" type="number" value="{{stockDetail.amount}}" class="form-control floatReserve money"
						 name="amount" range="0 9999999" required />
					</div>
					<div class="form-group col-8">
					    <label for="notes">备注</label>
					    <textarea id="notes_{{index}}" class="form-control" name="notes" rows="1" maxlength="100" value="{{stockDetail.notes}}">{{stockDetail.notes}}</textarea>
					</div>
					<div class="form-group col-4">
					    <button type="button" class="btn btn-secondary px-5 item-del">删除</button>
					</div>
					
					
				</div>
	</form>			
</script>
<!-- 司磅入库 -->
<script id="initDetailInfo3" type="text/html">
	<form id="saveForm_{{index}}" role="form" novalidate>
	<div class="row row-cols-12 detail" id="detailInfo_{{index}}">
					<div class="form-group col-4">
					<input type="hidden" class="form-control" id="code_{{index}}" name="code" value="{{stockDetail.code}}" required  />
					<label for="">接车单号</label> <input type="text" class="form-control" id="pickupNumber_{{index}}" name="pickupNumber" value="{{stockDetail.pickupNumber}}" required />
					</div>
					<div class="form-group col-4">
						<label for="">车型</label> <input type="text" class="form-control" id="carTypePublicCode_{{index}}" name="carTypePublicCode" value="{{stockDetail.carTypePublicCode}}"
						 required />
					</div>
					<div class="form-group col-4">
						<label for="">车牌号</label> <input type="text" class="form-control" id="carPlate_{{index}}" name="carPlate" value="{{stockDetail.carPlate}}" required />
					</div>
					<div class="form-group col-4">
						<label for="">冷库区域：<i class="red">*</i></label>
						<input id="districtId_{{index}}" name="districtId" class="form-control" value="{{stockDetail.districtId}}"
						 required />
						
					</div>
					<div class="form-group col-4">
						<label for="">冷库编号：<i class="red">*</i></label>
						<input id="assetsId_{{index}}" type="text" class="form-control"
						 name="assetsId" value="{{stockDetail.assetsId}}" required />
					</div>
					<div class="form-group col-4">
						<label for="" class="">入库件数：<i class="red">*</i></label> <input id="quantity_{{index}}" type="number" class="form-control floatReserve"
						 name="quantity" value="{{stockDetail.quantity}}" range="0 9999999" required />
					</div>
					<div class="form-group col-4">
						<label for="" class="">货物净重(公斤)：<i class="red">*</i></label> <input id="weight_{{index}}" type="number" class="form-control floatReserve"
						 name="weight" value="{{stockDetail.weight}}" range="0 9999999" required />
						 <button type="button" class="btn btn-secondary px-5">连接地磅</button>
					</div>
					<div class="form-group col-4">
						<label for="" class="">入库金额：<i class="red">*</i></label> <input id="amount_{{index}}" type="number" class="form-control floatReserve money"
						 name="amount" value="{{stockDetail.amount}}" range="0 9999999" required />
					</div>
					<div class="form-group col-8">
					    <label for="">备注</label>
					    <textarea id="notes_{{index}}" class="form-control" name="notes" rows="1" value="{{stockDetail.notes}}" maxlength="100">{{stockDetail.notes}}</textarea>
					</div>
					<div class="form-group col-4">
					    <button type="button" class="btn btn-secondary px-5 item-del">删除</button>
					</div>
					<#bcomboProvider _id="districtId_{{index}}" _provider="districtProvider" _queryParams="{departmentId:54}" />					
				</div>
	</form>			
</script>
<!-- 零散入库 -->
<script id="initDetailInfo2" type="text/html">
	<form id="saveForm_{{index}}" role="form" novalidate>
	<div class="row row-cols-12 detail" id="detailInfo_{{index}}">
					<div class="form-group col-4">
					<input type="hidden" class="form-control" id="code_{{index}}" name="code" value="{{stockDetail.code}}" required  />
					<div class="form-group col-4">
						<label for="">冷库区域：<i class="red">*</i></label>
						<input id="districtId_{{index}}" name="districtId" class="form-control" value="{{stockDetail.districtId}}"
						 required />
						
					</div>
					<div class="form-group col-4">
						<label for="">冷库编号：<i class="red">*</i></label>
						<input id="assetsId_{{index}}" type="text" class="form-control"
						 name="assetsId" value="{{stockDetail.assetsId}}" required />
					</div>
					<div class="form-group col-4">
						<label for="quantity" class="">入库件数：<i class="red">*</i></label> <input id="quantity_{{index}}" type="number" class="form-control floatReserve"
						 name="quantity" range="0 9999999" value="{{stockDetail.quantity}}" required />
					</div>
					<div class="form-group col-4">
						<label for="weight" class="">货物净重(公斤)：<i class="red">*</i></label> <input id="weight_{{index}}" type="number" class="form-control floatReserve"
						 name="weight" range="0 9999999" value="{{stockDetail.weight}}" required />
					</div>
					<div class="form-group col-4">
						<label for="weight" class="">入库金额：<i class="red">*</i></label> <input id="amount_{{index}}" type="number" class="form-control floatReserve money"
						 name="amount" range="0 9999999" value="{{stockDetail.amount}}" required />
					</div>
					<div class="form-group col-8">
					    <label for="notes">备注</label>
					    <textarea id="notes_{{index}}" class="form-control" name="notes" rows="1" maxlength="100" >{{stockDetail.notes}}</textarea>
					</div>
					<div class="form-group col-4">
					    <button type="button" class="btn btn-secondary px-5 item-del">删除</button>
					</div>
				</div>
	</form>			
</script>
